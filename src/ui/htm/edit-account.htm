<html window-width="16em" window-height="14em">

<head>
    <meta charset="utf-8">
    <title>修改账户</title>
    <link rel="stylesheet" href="../css/style.css">
    <style>
        body {
            padding: 0.5em 1em;
        }
    </style>
    <script|module>
        document.on("click", "button#submit", () => {
            let data = document.$("form#account").value;
            Window.this.close(data);
        });

        document.on("ready", () => {
            let { account, strategy_list } = Window.this.parameters;

            let strategy_element = document.$("[name='strategy']");
            strategy_list.forEach(strategy => {
                strategy_element.select.options.append(<option value={strategy}>{strategy}</option>);
            });

            if (strategy_list.length > 0) {
                strategy_element.value = strategy_list[0];
            }

            if (account != undefined) {
                let { username, password, strategy, server, nickname, ...others } = account;
                document.$("form#account").value = { username, password, strategy, server, nickname };
            }

        });
    </script>
</head>

<body>
    <form#account>
        <div><label>账号</label>
            <input|text (username) />
        </div>
        <div><label>密码</label>
            <input|password (password) />
        </div>
        <div><label>策略</label>
            <select|dropdown (strategy)>
                <option>7k7k.lua</option></select>
        </div>
        <div><label>区服</label>
            <input|text (server) />
        </div>
        <div><label>昵称</label>
            <input|text (nickname) />
        </div>
        <button#submit>修改账户</button>
            </form>
</body>

</html>